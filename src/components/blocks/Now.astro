---
import HeadingWIcon from "~/components/styled/polym/HeadingWIcon.astro";
import HighlightCard from "~/components/templates/HighlightCard.astro";
import Icon from "astro-iconify";
import { getCollection } from "astro:content";

const highlights = (await getCollection("highlight")).sort(
  (a, b) => a.data.sequence.valueOf() - b.data.sequence.valueOf(),
);
---

<section class="highlights-section">
  <HeadingWIcon as="h2">
    <Icon name="lucide:chevron-up-circle" />
    {" "}<span class="text-muted">/</span> now
  </HeadingWIcon>
  {highlights.map((h) => <HighlightCard highlight={h} />)}
</section>

<style is:global>
  .highlights-section {
    display: grid;
    width: 100%;
    grid-template-columns: repeat(auto-fit, min(100%, var(--size-content-2)));
    column-gap: var(--size-fluid-3);
    row-gap: var(--size-fluid-4);
    grid-auto-flow: dense;
    & > article {
      grid-row: span 3 / span 3;
      &:nth-child(2) {
        grid-column-start: 1;
        grid-row: span 4 / span 4;
        align-self: center;
      }
    }
  }
</style>
