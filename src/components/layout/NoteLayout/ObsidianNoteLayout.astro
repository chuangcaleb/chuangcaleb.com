---
import { render, type CollectionEntry } from "astro:content";
import { getNoteName } from "~/utils/post";
import NoteLayout from "./NoteLayout.astro";

interface Props {
  entry: CollectionEntry<"obsidian-note">;
}

const { entry } = Astro.props;

const { Content, headings } = await render(entry);

// title
const noteName = getNoteName(entry.filePath);
const title = entry.data.title ?? noteName;
---

<NoteLayout title={title} headings={headings} metadata={entry.data}>
  <Content />
  <Fragment slot="sidebar">
    <slot name="sidebar" />
  </Fragment>
</NoteLayout>
