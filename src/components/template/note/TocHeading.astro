---
import type { TocItem } from "lib/remark/toc";

interface Props {
  tocItem: TocItem;
}

const { tocItem } = Astro.props;
---

<li>
  <a href={"#" + tocItem.slug}>
    {tocItem.text}
  </a>
  {
    tocItem.children.length > 0 && (
      <ul>
        {tocItem.children.map((child) => (
          <Astro.self tocItem={child} />
        ))}
      </ul>
    )
  }
</li>

<style>
  li {
    overflow-x: hidden;
    font-size: var(--step--1);
    text-overflow: ellipsis;
    white-space: nowrap;

    padding-block: var(--size-relative-2);
    ul {
      padding-block-start: var(--size-relative-1);
    }
    a {
      --color: var(--text-faded);
      --color-hover: var(--brand);
      text-decoration: none;
    }
    ul li ul & {
      margin-inline-start: var(--space-3xs);
      padding-inline-start: var(--space-2xs);
      border-left-width: 1px;
      border-left-color: var(--text-muted);
      transition-duration: 300ms;
    }
    nav & {
      padding-inline: var(--space-3xs);
    }
    :has(> a:is(:hover, :focus, :active)) {
      border-left-color: var(--brand);
    }
  }
</style>
