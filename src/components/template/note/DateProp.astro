---
import { formatDisplayDate, getLongDurationSince } from "~/utils/time";
import { extractWikilink } from "lib/markdown/extractWikilink";

interface Props {
  datetime: string;
}

const { datetime } = Astro.props;

const isValidDate = Date.parse(datetime);
const validDatetimeString = isValidDate ? datetime : extractWikilink(datetime);
const diplayDatetime = formatDisplayDate(validDatetimeString);
---

<time datetime={new Date(validDatetimeString).toISOString()}
  >{diplayDatetime}</time
> / {getLongDurationSince(validDatetimeString)}
