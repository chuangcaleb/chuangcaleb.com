---
import { getEntry } from "astro:content";
import BrandA from "~/components/styled/monom/BrandA.astro";
import { getNoteName } from "~/utils/post";
import type { MetadataValues } from "./MetadataValue.astro";

interface Props {
  isLink: boolean;
  value: Exclude<MetadataValues, Array<any>>;
}

const { value } = Astro.props;
const isDate = value instanceof Date;
const note =
  typeof value !== "string" &&
  value &&
  (await getEntry("obsidian-note", value.slug));
---

{
  isDate ? (
    value.toLocaleDateString("en-gb")
  ) : note ? (
    <BrandA href={`/garden/note/${note.slug}`}>{getNoteName(note.id)}</BrandA>
  ) : typeof value === "string" ? (
    Date.parse(value) ? (
      new Date(value).toLocaleDateString("en-gb")
    ) : (
      value
    )
  ) : null
}
