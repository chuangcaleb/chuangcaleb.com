---
import type { CollectionEntry } from "astro:content";
import { getCldImgData } from "lib/cloudinary/get";
import UINestednline from "~/components/styled/monom/UINestednline.astro";
import Caps from "~/components/styled/polym/Caps.astro";
import CldImg from "../primitives/CldImg.astro";

interface Props {
  project: CollectionEntry<"project">;
}

const { project } = Astro.props;

const components = {
  blockquote: "header",
  h1: "h3",
  h2: Caps,
  ul: UINestednline,
};

const { Content } = await project.render();

const i = getCldImgData("projects/" + project.slug);
---

<article class="project">
  <Content components={components} />
  <CldImg resource={i} hasBorder />
</article>

<style is:global>
  .project {
    display: grid;
    max-width: var(--size-content-3);
    & > * + * {
      margin-top: var(--size-relative-6);
    }
    header {
      display: grid;
      :not(h3) {
        order: -1;
      }
    }

    em {
      font-family: var(--font-mono);
    }
    em,
    li > svg {
      color: var(--text-muted);
    }
  }
</style>
