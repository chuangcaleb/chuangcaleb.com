---
import type { CollectionEntry } from "astro:content";
import { getEntries, getEntry } from "astro:content";
import AccentA from "~/components/styled/monom/AccentA.astro";
import { getNoteName } from "~/utils/post";

interface Props {
  note: CollectionEntry<"obsidian-note">;
}
const { note } = Astro.props;

const collectionNote = await getEntry("obsidian-note", note.slug);

const isOrdered = !!note.data.series;

const List = isOrdered ? "ol" : "ul";

const notes =
  collectionNote?.data.collectionItems &&
  (await getEntries(collectionNote.data.collectionItems));
---

{
  notes && (
    <List>
      {notes.map((note) => {
        if (!note) return null;
        return (
          <li>
            <AccentA href={`/note/${note.slug}`}>
              {getNoteName(note.id)}
            </AccentA>
          </li>
        );
      })}
    </List>
  )
}
